<!DOCTYPE html>
<html lang="es">
{% load static %}
<head>
<meta charset="UTF-8">
<title>EDUGES - Baja Alumno</title>
<style>
/* --- CSS Limpiado y Corregido --- */
body {
    margin:0;
    font-family:Arial,sans-serif;
    background:url("{% static 'imagenes/fondo_de_baja.png' %}") no-repeat center center fixed;
    background-size:cover;
    color:#fff;
}
header {
    background:#072f6b;
    color:white;
    padding:20px 30px;
    display:flex;
    align-items:center;
}
.logo-container {
    display:flex;
    align-items:center;
    gap:25px;
}
.logo-container img {
    height:80px;
}
.logo-text {
    font-size:40px;
    font-weight:bold;
}
.container {
    display:flex;
    min-height:100vh;
}
.sidebar {
    width:280px;
    background:#0b3d91;
    padding:20px 30px;
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    box-sizing:border-box;
    min-height:100vh;
}
.menu {
    list-style:none;
    padding:0;
    margin:0;
}
.menu li {
    margin:15px 0;
}
.menu a {
    display:block;
    text-decoration:none;
    color:white;
    font-weight:bold;
    font-size:20px;
    padding:10px 15px;
    border-radius:5px;
}
.menu a:hover {
    background:#072f6b;
}
.submenu ul {
    list-style:none;
    padding-left:20px;
    margin-top:5px;
    max-height:0;
    overflow:hidden;
    transition:max-height 0.3s ease;
}
.submenu ul.open {
    max-height:500px;
}
.submenu a {
    position:relative;
    cursor:pointer;
}
.submenu > a::after {
    content:"‚ñº";
    position:absolute;
    right:15px;
    font-size:12px;
    transition:transform 0.3s;
}
.submenu ul.open + a::after {
    transform:rotate(180deg);
}
.submenu ul li a {
    font-weight:normal;
    font-size:18px;
    padding-left:25px;
}
.submenu ul li a:hover {
    background:#09417e;
}
.user-info {
    color:white;
    font-weight:bold;
    font-size:18px;
    margin-top:auto;
}
.user-info span {
    margin-right:10px;
    font-size:20px;
}
.user-email {
    font-size:14px;
    color:#e0e0e0;
    margin-left:0;
}
.logout form {
    margin-top:10px;
}
.logout button {
    width:100%;
    padding:10px;
    background:#c0392b;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-size:16px;
}
.logout button:hover {
    background:#e74c3c;
}
.content {
    flex:1;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:40px 20px;
    min-height:100vh;
    position:relative;
}
.content::before {
    content:"";
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-color:rgba(0,0,0,0.3);
    z-index:1;
}
.form-container {
    width:650px;
    background:#fff;
    padding:30px;
    border-radius:20px;
    box-shadow:0 8px 25px rgba(0,0,0,0.5);
    color:#072f6b;
    position:relative;
    z-index:2;
}
.form-container h2 {
    text-align:center;
    font-size:2rem;
    margin-top:0;
    margin-bottom:25px;
    color:#0b3d91;
}
.form-group {
    position:relative;
    margin-bottom:20px;
}
.form-group input {
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid #ccc;
    background:#fff;
    font-size:16px;
    box-sizing: border-box;
}
.form-group input:focus {
    outline:none;
    border-color:#0b3d91;
    box-shadow:0 0 5px #0b3d91;
}

.form-group label {
    position:absolute;
    top: 14px;
    left:15px;
    background:#fff;
    padding:0 5px;
    color:#777;
    font-size: 16px;
    transition:0.3s;
    pointer-events:none;
}

.form-group input:focus + label, .form-group input:not(:placeholder-shown) + label {
    top:-10px;
    left:10px;
    font-size:12px;
    color:#0b3d91;
}
/* Estilo original de bot√≥n (ROJO) */
button {
    width:100%;
    padding:14px;
    background:#c0392b;
    color:white;
    border:none;
    border-radius:10px;
    font-weight:bold;
    font-size:18px;
    cursor:pointer;
    transition:0.3s;
    margin-top:10px;
}
button:hover {
    background:#e74c3c;
}

/* Contenedor para botones lado a lado */
.action-row {
    display: flex;
    gap: 10px;
    margin-top: 10px; 
}
.action-row > form,
.action-row > a {
    flex-basis: 50%;
    margin: 0; 
}
.action-row button {
    width: 100%;
    margin-top: 0; 
}
/* Estilo para "Cancelar" (Gris) */
.btn-secondary {
    display: block; 
    padding: 14px;
    background: #6c757d; 
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
    text-align: center;
    text-decoration: none;
    box-sizing: border-box; 
}
.btn-secondary:hover {
    background: #5a6268; 
}

.message {
    text-align:center;
    margin-top:15px;
    font-weight:bold;
    color:#c0392b;
    display:none;
}
.alert-box {
    margin-top:20px;
    padding:15px;
    border-radius:10px;
    color:#fff;
    font-weight:bold;
    text-align:center;
}
.alert-box.success {
    background:#27ae60;
}
.alert-box.error {
    background:#c0392b;
}
.alert-box.warning {
    background:#2980b9;
}
@media (max-width:768px) {
    .form-container { width:95%; padding:20px; }
}
</style>
</head>
<body>
<header>
    <div class="logo-container">
        <img src="{% static 'imagenes/eduges1.png' %}" alt="EduGes">
        <span class="logo-text">EduGes</span>
    </div>
</header>
<div class="container">
<aside class="sidebar">
<div>
<ul class="menu">
<li><a href="{% url 'home' %}">üèõÔ∏è Inicio</a></li>
<li class="submenu">
    <a>Alumnos</a>
    <ul class="open">
        <li><a href="{% url 'alta_alumnos' %}">‚úÖ Alta alumnos</a></li>
        <li><a href="{% url 'modificar_alumnos' %}">‚öôÔ∏è Modificar alumnos</a></li>
        <li><a href="{% url 'baja_alumnos' %}">‚ùå Baja alumnos</a></li>
    </ul>
</li>
<li class="submenu">
    <a>Tutores</a>
    <ul>
        <li><a href="{% url 'alta_tutores' %}">‚úÖ Alta tutores</a></li>
        <li><a href="{% url 'modificar_tutores' %}">‚öôÔ∏è Modificar tutores</a></li>
        <li><a href="{% url 'baja_tutores' %}">‚ùå Baja tutores</a></li>
    </ul>
</li>
<li class="submenu">
    <a>Usuarios</a>
    <ul>
        <li><a href="{% url 'alta_usuarios' %}">‚úÖ Alta usuario</a></li>
        <li><a href="{% url 'modificar_usuarios' %}">‚öôÔ∏è Modificar usuario</a></li>
        <li><a href="{% url 'baja_usuarios' %}">‚ùå Baja usuario</a></li>
    </ul>
</li>
<li class="submenu">
    <a>Pagos</a>
    <ul>
        <li><a href="{% url 'asignar_monto' %}"> Asignar monto</a></li>
        <li><a href="{% url 'pagos_alumnos' %}"> Pagos alumnos</a></li>
    </ul>
</li>
<li class="submenu">
    <a>Reportes</a>
    <ul>
        <li><a href="{% url 'tutores_vencida' %}">Tutores de cuota vencida</a></li>
        <li><a href="{% url 'cantidad_vencidas' %}">Cantidad de cuotas vencidas</a></li>
        <li><a href="{% url 'alumnos_dia' %}">Alumnos con cuotas al d√≠a</a></li>
    </ul>
</li>
</ul>
</div>
<div class="user-info">
{% if request.user.is_authenticated %}
<div><span>üë§</span>{{ request.user.username }}</div>
<div class="user-email">{{ request.user.email }}</div>
<div class="logout">
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit">Cerrar sesi√≥n</button>
    </form>
</div>
{% else %}
<div>No hay usuario logueado</div>
{% endif %}
</div>
</aside>
<main class="content">
<div class="form-container">
<h2>Dar de baja un alumno</h2>

{% if messages %}
    {% for message in messages %}
        <div class="alert-box {% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</div>
    {% endfor %}
{% endif %}

<form id="bajaForm" method="POST" action="{% url 'baja_alumnos' %}">
{% csrf_token %}
<div class="form-group">
    <input type="text" name="nombre_apellido" id="nombre_apellido" placeholder=" ">
    <label for="nombre_apellido">Buscar por Nombre / Apellido</label>
</div>
<div class="form-group">
    <input type="text" name="legajo" id="legajo" placeholder=" ">
    <label for="legajo">Buscar por Legajo</label>
</div>
<button type="submit">Buscar Alumno</button>
<p id="mensaje" class="message">Por favor, complete al menos un campo para buscar.</p>
</form>

{% if alumno %}
<div class="alert-box warning">
    ‚ö†Ô∏è Est√°s por dar de baja a <strong>{{ alumno.nombre }} {{ alumno.apellido }}</strong> - Legajo: <strong>{{ alumno.legajo }}</strong>
</div>

<div class="action-row">

    <form method="POST" action="{% url 'baja_alumnos' %}">
        {% csrf_token %}
        <input type="hidden" name="id" value="{{ alumno.id }}">
        <button type="submit" name="confirmar_baja">Confirmar Baja</button>
    </form>
    
    <a href="{% url 'baja_alumnos' %}" class="btn-secondary">Cancelar</a>

</div>
{% endif %}

</div>
</main>
</div>
<script>
document.querySelectorAll(".submenu > a").forEach(menu => {
    menu.addEventListener("click", e => {
        e.preventDefault();
        const sublist = menu.nextElementSibling;
        document.querySelectorAll(".submenu ul").forEach(ul => {
            if (ul !== sublist) ul.classList.remove("open");
        });
        sublist.classList.toggle("open");
    });
});

const form = document.getElementById("bajaForm");
const mensaje = document.getElementById("mensaje");
form.addEventListener("submit", function(e) {
    const nombre = document.getElementById("nombre_apellido").value.trim();
    const legajo = document.getElementById("legajo").value.trim();
    if (nombre === "" && legajo === "" && !form.querySelector('input[name="id"]')) {
        e.preventDefault();
        mensaje.style.display = "block";
    } else {
        mensaje.style.display = "none";
    }
});
</script>
</body>
</html>
